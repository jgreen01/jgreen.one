---
import PageLayout from "../../layouts/PageLayout.astro";
import EntryCard from "../../components/EntryCard.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("entries", e => !e.data.draft && e.data.kind === "blog"))
  .sort((a, b) => +b.data.pubDate - +a.data.pubDate);
---
<PageLayout title="Blog">
  <h1 class="text-4xl font-bold mb-4">Blog</h1>
  {posts.length === 0 ? (
    <p>No posts yet. Add files to <code>src/content/entries/</code> with <code>kind: "blog"</code>.</p>
  ) : (
    <ul class="list-none mt-8">
      {posts.map((entry) => <EntryCard entry={entry} />)}
    </ul>
  )}
</PageLayout>