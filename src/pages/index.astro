---
import Base from "../layouts/Base.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("posts")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<Base title="Home â€” My Site" description="Portfolio & Blog">
  <main class="max-w-3xl mx-auto p-6">
    <h1 class="text-3xl font-bold">Hello!</h1>
    <p>Welcome to my corner of the web.</p>
    <ul class="mt-8 space-y-4">
      {posts.map((post) => (
        <li>
          <a href={`/posts/${post.slug}/`} class="text-xl font-semibold hover:underline">
            {post.data.title}
          </a>
          <p class="text-gray-600">{post.data.description}</p>
          <p class="text-sm text-gray-500">
            {post.data.pubDate.toDateString()} | {post.data.category}
          </p>
        </li>
      ))}
    </ul>
  </main>
</Base>