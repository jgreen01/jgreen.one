---
import PageLayout from "../layouts/PageLayout.astro";
import EntryCard from "../components/EntryCard.astro";
import Avatar from "../components/Avatar.astro";
import { getCollection } from "astro:content";

/**
 * Fetch all published entries (both kinds), newest first.
 * You can later add "featured: true" to frontmatter to curate.
 */
const all = (await getCollection("entries", e => !e.data.draft))
  .sort((a, b) => +b.data.pubDate - +a.data.pubDate);

// Select top N to feature on the homepage
const featured = all.slice(0, 4);
---
<PageLayout>
  <section class="flex items-center flex-col sm:flex-row">
    <Avatar class="avatar w-3/5 mb-2 sm:mb-0 sm:mr-4" />
    <span>
      <h1 class="text-4xl font-bold mb-4">Passionate About Simplifying Complexity</h1>
      <p>Senior software developer focused on reliable, scalable systems and clear, human‑centered design. Currently expanding into data science (MCS‑DS) and applied ML.</p>
    </span>
    <!-- Add a prominent call-to-action or quick nav later -->
  </section>

  <section class="mt-8">
    <h2 class="text-3xl font-bold mb-4">Latest Entries</h2>
    <ul class="list-none mt-4">
      {featured.map((entry) => <EntryCard entry={entry} />)}
    </ul>
    <p class="mt-4">
      <a href="/projects/" class="text-accent dark:text-accentDark hover:underline">Browse Projects</a> • <a href="/blog/" class="text-accent dark:text-accentDark hover:-underline">Read the Blog</a>
    </p>
  </section>
</PageLayout>
