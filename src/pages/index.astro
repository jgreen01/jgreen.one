---
import Base from "../layouts/Base.astro";
import EntryCard from "../components/EntryCard.astro";
import Avatar from "../components/Avatar.astro";
import { getCollection } from "astro:content";

/**
 * Fetch all published entries (both kinds), newest first.
 * You can later add "featured: true" to frontmatter to curate.
 */
const all = (await getCollection("entries", e => !e.data.draft))
  .sort((a, b) => +b.data.pubDate - +a.data.pubDate);

// Select top N to feature on the homepage
const featured = all.slice(0, 4);
---
<Base title="Site Title Placeholder" description="Short site description for the homepage.">
  <section class="flex items-center flex-col sm:flex-row">
    <Avatar class="avatar w-3/5 sm:w-1/3 mb-2 sm:mb-0 sm:mr-4" />
    <span>
      <h1>Hero Headline Placeholder</h1>
      <p>1–2 sentence tagline that describes focus (e.g., projects + writing in tech/AI/ML).</p>
    </span>
    <!-- Add a prominent call-to-action or quick nav later -->
  </section>

  <section class="mt-8">
    <h2>Latest Entries</h2>
    <ul class="list-none mt-4">
      {featured.map((entry) => <EntryCard entry={entry} />)}
    </ul>
    <p class="mt-4">
      <a href="/projects/" class="text-accent dark:text-accentDark hover:underline">Browse Projects</a> • <a href="/blog/" class="text-accent dark:text-accentDark hover:-underline">Read the Blog</a>
    </p>
  </section>
</Base>