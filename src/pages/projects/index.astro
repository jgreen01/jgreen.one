---
import PageLayout from "../../layouts/PageLayout.astro";
import EntryCard from "../../components/EntryCard.astro";
import { getCollection } from "astro:content";

const all = await getCollection("entries", e => !e.data.draft && e.data.kind === "project");
const projects = all.sort((a, b) => +b.data.pubDate - +a.data.pubDate);
---
<PageLayout title="Projects">
  <h1 class="text-4xl font-bold mb-4">Projects</h1>
  {projects.length === 0 ? (
    <p>No projects yet. Add files to <code>src/content/entries/</code> with <code>kind: "project"</code>.</p>
  ) : (
    <ul class="list-none mt-8">
  {projects.map((entry) => <EntryCard entry={entry} />)}
</ul>
  )}
</PageLayout>