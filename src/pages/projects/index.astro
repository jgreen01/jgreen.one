---
import Base from "../../layouts/Base.astro";
import EntryCard from "../../components/EntryCard.astro";
import { getCollection } from "astro:content";

const all = await getCollection("entries", e => !e.data.draft && e.data.kind === "project");
const projects = all.sort((a, b) => +b.data.pubDate - +a.data.pubDate);
---
<Base title="Projects â€” Placeholder" description="Selected projects. Replace descriptions later.">
  <h1>Projects</h1>
  {projects.length === 0 ? (
    <p>No projects yet. Add files to <code>src/content/entries/</code> with <code>kind: "project"</code>.</p>
  ) : (
    projects.map(({ slug, data }) => (
      <EntryCard
        href={`/entries/${slug}/`}
        title={data.title}
        description={data.description}
        kind={data.kind}
        pubDate={data.pubDate}
        tags={data.tags}
      />
    ))
  )}
</Base>
