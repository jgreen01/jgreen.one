---
import PageLayout from "../../layouts/PageLayout.astro";
import { getCollection } from "astro:content";

const entries = await getCollection("entries", e => !e.data.draft);
const tagCounts = new Map<string, number>();
for (const e of entries) for (const t of e.data.tags ?? []) tagCounts.set(t, (tagCounts.get(t) ?? 0) + 1);
const tags = Array.from(tagCounts.entries()).sort((a, b) => a[0].localeCompare(b[0]));
---
<PageLayout title="Tags â€” Placeholder" description="Browse by topic: backend, cloud, data, ML, infra, Portuguese, DEIB.">
  <h1 class="text-4xl font-bold mb-4">Tags</h1>
  {tags.length === 0
    ? <p>No tags yet. Add tags in entry frontmatter.</p>
    : <ul>
        {tags.map(([t, n]) => (
          <li><a href={`/tags/${encodeURIComponent(t)}/`}>{t}</a> ({n})</li>
        ))}
      </ul>
  }
</PageLayout>